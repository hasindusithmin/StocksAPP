<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="/StocksAPP/autoComplete.min.css">
    <script src="/StocksAPP/autoComplete.min.js"></script>

</head>

<body>
    <div class="w3-panel">
        <div class="w3-row">
            <div class="w3-third">.</div>
            <div class="w3-third">
                <div class="w3-center">
                    <input id="autoComplete" type="search" dir="ltr" spellcheck=false autocorrect="off" autocomplete="off" autocapitalize="off" maxlength="2048" tabindex="1">
                    <br>
                    <button class="w3-button w3-round-xxlarge w3-margin-top w3-border w3-border-orange" id="brief">stocks</button>
                    <button class="w3-button w3-round-xxlarge w3-margin-top w3-border w3-border-orange" id="more">overview</button>

                </div>
            </div>
            <div class="w3-third">.</div>
        </div>
    </div>
    <script>
        fetch('https://stockapi.deta.dev/countries')
            .then(res => res.json())
            .then(countries => {
                const autoCompleteJS = new autoComplete({
                    placeHolder: "Search for Countries...",
                    data: {
                        src: countries
                    },
                    resultItem: {
                        highlight: true,
                    },
                    events: {
                        input: {
                            selection: (event) => {
                                const selection = event.detail.selection.value;
                                autoCompleteJS.input.value = selection;
                            }
                        }
                    }
                });
            })
        document.getElementById('brief').onclick = ()=>{
            const country = document.getElementById('autoComplete').value;
            if (country != '') {
                const url = `/StocksAPP/stocks.html#${country}`
                location.href = url;
            }
        }  
        document.getElementById('more').onclick = ()=>{
            const country = document.getElementById('autoComplete').value;
            if (country != '') {
                const url = `/StocksAPP/overview.html#${country}`
                location.href = url;
            }
        }   
    </script>
</body>

</html>